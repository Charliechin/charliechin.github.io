!function(){"use strict";function t(){return 0}function e(){return y.length=0,y}function n(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){return y.push(t),y}function i(t,e,n,r){for(var i in t)if(!o(t[i],r.exclude)&&n.matches(t[i],e))return t}function o(t,e){for(var n=!1,r=0,i=(e=e||[]).length;r<i;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}function u(t){w.put(t),function(){O.searchInput.addEventListener("keyup",function(t){!function(t){return-1===[13,16,20,37,38,39,40,91].indexOf(t)}(t.which)||(a(),s(t.target.value))})}()}function a(){O.resultsContainer.innerHTML=""}function c(t){O.resultsContainer.innerHTML+=t}function s(t){!function(t){return t&&0<t.length}(t)||(a(),function(t,e){var n=t.length;if(0===n)return c(O.noResultsText);for(var r=0;r<n;r++)t[r].query=e,c(l.compile(t[r]))}(w.search(t),t))}function f(t){throw new Error("SimpleJekyllSearch --- "+t)}var l={compile:function(t){return p.template.replace(p.pattern,function(e,n){var r=p.middleware(n,t[n],p.template);return void 0!==r?r:t[n]||e})},setOptions:function(t){p.pattern=t.pattern||p.pattern,p.template=t.template||p.template,"function"==typeof t.middleware&&(p.middleware=t.middleware)}},p={};p.pattern=/\{(.*?)\}/g,p.template="",p.middleware=function(){};var d=function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var u=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===u)continue t;return!1}return!0},h=new function(){this.matches=function(t,e){return d(e.toLowerCase(),t.toLowerCase())}},m=new function(){this.matches=function(t,e){return!!t&&(t=t.trim().toLowerCase(),(e=e.trim().toLowerCase()).split(" ").filter(function(e){return 0<=t.indexOf(e)}).length===e.split(" ").length)}},w={put:function(t){return n(t)?r(t):function(t){return Boolean(t)&&"[object Array]"===Object.prototype.toString.call(t)}(t)?function(t){var i=[];e();for(var o=0,u=t.length;o<u;o++)n(t[o])&&i.push(r(t[o]));return i}(t):void 0},clear:e,search:function(t){return t?function(t,e,n,r){for(var o=[],u=0;u<t.length&&o.length<r.limit;u++){var a=i(t[u],e,n,r);a&&o.push(a)}return o}(y,t,v.searchStrategy,v).sort(v.sort):[]},setOptions:function(e){(v=e||{}).fuzzy=e.fuzzy||!1,v.limit=e.limit||10,v.searchStrategy=e.fuzzy?h:m,v.sort=e.sort||t}},y=[],v={};v.fuzzy=!1,v.limit=10,v.searchStrategy=v.fuzzy?h:m,v.sort=t;var g,O,z,S,j,q={load:function(t,e){var n=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}();n.open("GET",t,!0),n.onreadystatechange=function(t,e){return function(){if(4===t.readyState&&200===t.status)try{e(null,JSON.parse(t.responseText))}catch(n){e(n,null)}}}(n,e),n.send()}},C=function M(t){if(!function(t){return t&&"undefined"!=typeof t.required&&t.required instanceof Array}(t))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof M))return new M(t);var e=t.required;this.getRequiredOptions=function(){return e},this.validate=function(t){var n=[];return e.forEach(function(e){"undefined"==typeof t[e]&&n.push(e)}),n}},L={merge:function(t,e){var n={};for(var r in t)n[r]=t[r],"undefined"!=typeof e[r]&&(n[r]=e[r]);return n},isJSON:function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(e){return!1}}};g=window,O={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},S=C({required:z=["searchInput","resultsContainer","json"]}),j=function(t){return 0<S.validate(t).length&&f("You must specify the following required options: "+z),O=L.merge(O,t),l.setOptions({template:O.searchResultTemplate,middleware:O.templateMiddleware}),w.setOptions({fuzzy:O.fuzzy,limit:O.limit,sort:O.sortMiddleware}),(L.isJSON(O.json)?u:function(t){q.load(t,function(e,n){e&&f("failed to get JSON ("+t+")"),u(n)})})(O.json),{search:s}},g.SimpleJekyllSearch=function(t){var e=j(t);return t.success.call(e),e}}();